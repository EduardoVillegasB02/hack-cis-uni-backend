generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

enum Level {
  beginner
  intermediate
  advanced
  expert
}

enum Plan {
  silver
  gold
  diamond
}

model Education {
  id                    String          @id @default(uuid())
  name                  String          @unique
  initial               String?
  users                 User[]
  created_at            DateTime        @default(now())
  updated_at            DateTime        @updatedAt
  deleted_at            DateTime?
}

model Enrollment {
  id                    String          @id @default(uuid())
  team                  Team            @relation(fields: [team_id], references: [id])
  team_id               String
  user                  User            @relation(fields: [user_id], references: [id])
  user_id               String
  created_at            DateTime        @default(now())
  updated_at            DateTime        @updatedAt
  deleted_at            DateTime?
}

model Expertise {
  id                    String          @id @default(uuid())
  name                  String          @unique
  users                 User[]
  created_at            DateTime        @default(now())
  updated_at            DateTime        @updatedAt
  deleted_at            DateTime?
}

model Project {
  id                    String          @id @default(uuid())
  name                  String?
  description_initial   String
  description_final     String?
  github                String?
  video_pitch           String?
  presentation          String?
  demo                  String?
  documentation         String?
  teams                 Team[]
  created_at            DateTime        @default(now())
  updated_at            DateTime        @updatedAt
  deleted_at            DateTime?
}

model Sponsor {
  id                    String          @id @default(uuid())
  name                  String          @unique
  email                 String
  contact_name          String
  contact_lastname      String
  contact_phone         String
  linkedin              String?
  instagram             String?
  facebook              String?
  plan                  Plan
}

model Team {
  id                    String          @id @default(uuid())
  name                  String          @unique
  project               Project         @relation(fields: [project_id], references: [id])
  project_id            String
  enrollments           Enrollment[]
  created_at            DateTime        @default(now())
  updated_at            DateTime        @updatedAt
  deleted_at            DateTime?
}

model User {
  id                    String          @id @default(uuid())
  name                  String
  lastname              String
  dni                   String?
  email                 String          @unique
  phone                 String
  linkedin              String
  github                String?
  social                String?
  background            String?
  level                 Level
  education             Education       @relation(fields: [education_id], references: [id])
  education_id          String
  expertise             Expertise       @relation(fields: [expertise_id], references: [id])
  expertise_id          String
  enrollments           Enrollment[]
  created_at            DateTime        @default(now())
  updated_at            DateTime        @updatedAt
  deleted_at            DateTime?
}
